# Paper Idea: 2411.09502 - SignalNet

This document outlines the proposed implementation of a "SignalNet," a concept inspired by the research paper "Golden Noise for Diffusion Models" (2411.09502), adapted for the CryptoSentinel trading bot.

## 1. Summary of "Golden Noise" Paper

The paper introduces a machine learning framework to find "golden noises" in diffusion models for image generation. A "golden noise" is an optimal input that leads to a higher-quality output (e.g., better text-to-image alignment). The core concepts are:

*   **Golden Noise:** An optimal input noise that produces superior results.
*   **Noise Prompt:** A learnable perturbation, derived from a given context (the text prompt), that transforms a random noise into a "golden noise".
*   **NPNet (Noise Prompt Network):** A small neural network trained to predict these "golden noises" from a given context.
*   **Data Collection:** A pipeline that uses a feedback mechanism (a human preference model) to identify high-quality examples and create a dataset of "golden noises" for training the NPNet.

## 2. Mapping to the Trading Domain

We propose to adapt these concepts to the domain of cryptocurrency trading:

*   **"Golden Noise" -> "Golden Trading Signal":** A "Golden Trading Signal" is a specific combination of market indicators, sentiment scores, and other data points that has historically led to profitable trades. For example, a high RSI, a bullish MACD crossover, and positive sentiment from recent news could form a "golden signal".
*   **"Noise Prompt" -> "Signal Prompt":** A "Signal Prompt" represents the current market context. This would be a structured object containing information such as the asset, the current market regime (bull/bear), recent news headlines, and key technical indicators.
*   **NPNet -> "SignalNet":** The "SignalNet" will be a small neural network that takes a "Signal Prompt" as input and outputs a "Golden Trading Signal." This signal will then be used to guide the `Trader` agent's decisions.

## 3. High-Level Architecture for SignalNet

The SignalNet will be a small, fully-connected neural network built with PyTorch (or another suitable library).

*   **Input Layer:** The input layer will accept a flattened vector representing the "Signal Prompt". This vector will include normalized values for various market indicators (e.g., RSI, MACD, Bollinger Bands), sentiment scores, and other relevant data.
*   **Hidden Layers:** A few hidden layers with ReLU activation functions will process the input.
*   **Output Layer:** The output layer will produce a vector representing the "Golden Trading Signal". This could be a vector of suggested parameters for a trade (e.g., entry price, take-profit, stop-loss) or a simple "buy/sell/hold" signal with a confidence score.

The SignalNet will be implemented as a new tool in `backend/tools/`.

## 4. Training Data Collection

To train the SignalNet, we need a dataset of historical trading signals and their outcomes. We will implement a new logging mechanism to capture this data:

1.  **Trade Logger:** A new function, `log_trade`, will be added to the `khala_integration.py` module. This function will be called by the `Trader` agent whenever it executes a trade.
2.  **Data to be Logged:** The `log_trade` function will store the following information in a dedicated SurrealDB table (e.g., `trades`):
    *   The "Signal Prompt" that led to the trade.
    *   The trade parameters (entry price, stop-loss, take-profit).
    *   The outcome of the trade (profit/loss).
3.  **"Golden" Labeling:** We will use a feedback mechanism to label trades as "golden" or "not golden". Initially, this can be a simple rule-based system (e.g., trades with a profit > 5% are "golden"). In the future, we could implement a more sophisticated system, similar to the human preference model in the paper, to score trades based on multiple factors (e.g., risk-adjusted return).

## 5. Integration Plan

1.  **Add ML Library:** Add `torch` to `backend/requirements.txt`.
2.  **Implement Trade Logger:** Add the `log_trade` function to `khala_integration.py` and modify the `Trader` agent to call it after each trade.
3.  **Build SignalNet Tool:** Create a new file, `backend/tools/signal_net.py`, that contains the SignalNet model and a tool function that the `Trader` agent can call.
4.  **Modify Trader Agent:** The `Trader` agent will be modified to:
    *   Construct a "Signal Prompt" from the current market data.
    *   Call the SignalNet tool with the "Signal Prompt" to get a "Golden Trading Signal".
    *   Use the "Golden Trading Signal" to inform its trading decisions. The "Golden Signal" will act as a strong recommendation, but the `Trader` agent will still have the final say, allowing for human oversight and the integration of other tools.
5.  **Training Pipeline:** A new script will be created in `scripts/` to train the SignalNet on the data collected in the `trades` table.
